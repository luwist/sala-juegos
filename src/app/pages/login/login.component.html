<main class="main">
  <div>
    <h1 class="title">Iniciar Sesion</h1>

    <brn-select placeholder="Elige tu cuenta">
      <hlm-select-trigger class="w-full h-12">
        <hlm-select-value />
      </hlm-select-trigger>
      <hlm-select-content>
        @for (account of accounts; track $index) {
        <hlm-option
          value="{{ account.username }}"
          (click)="onSelectedAccount(account)"
        >
          <div class="flex items-center gap-3 py-2">
            <img
              src="{{ account.pictureUrl }}"
              class="w-12 h-12 rounded-full"
            />
            <div>
              <p class="text-base font-bold">
                {{ account.username }}
              </p>
              <p class="text-sm text-gray-600 font-medium capitalize">
                {{ account.role }}
              </p>
            </div>
          </div>
        </hlm-option>
        }
      </hlm-select-content>
    </brn-select>

    <brn-separator hlmSeparator class="my-4" />

    <form class="form" (submit)="login($event)" [formGroup]="loginForm">
      <label hlmLabel>
        Correo Electronico
        <input
          hlmInput
          type="email"
          placeholder="Correo Electronico"
          formControlName="email"
        />
      </label>
      @if (emailControl.invalid && (emailControl.touched || emailControl.dirty))
      { @if (emailControl.hasError('required')) {
      <p class="error">El correo electronico no puede estar vacio</p>
      } @if (emailControl.hasError('email')) {
      <p class="error">Ingrese un correo electronico valido</p>
      } }

      <label hlmLabel>
        Contrase単a
        <input
          hlmInput
          type="password"
          placeholder="Contrase単a"
          formControlName="password"
        />
      </label>
      @if (passwordControl.invalid && (passwordControl.touched ||
      passwordControl.dirty)) {
      <p class="error">La contrase単a no puede estar vacia</p>
      }

      <button
        [disabled]="(loginForm.statusChanges | async) !== 'VALID'"
        hlmBtn
        type="submit"
        class="mt-10"
      >
        {{ buttonText }}
      </button>

      <p class="create-account">
        多No tienes una cuenta? <a href="/register">Registrate</a>
      </p>
    </form>
  </div>
</main>
