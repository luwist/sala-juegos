<main class="main">
  <p-toast position="top-center"></p-toast>
  <form class="form" (submit)="login()">
    <h1 class="title">Iniciar Sesion</h1>

    <p-dropdown
      [options]="users"
      [(ngModel)]="selectedUser"
      optionLabel="name"
      name="user"
      (onClick)="selectUser()"
      placeholder="Seleccionar usuario"
      class="custom-dropdown"
    >
      <ng-template pTemplate="selectedItem">
        @if (selectedUser) {
        <div class="user">
          <img src="{{ selectedUser.avatar }}" class="avatar" />
          <div class="content">
            <p class="username">{{ selectedUser.username }}</p>
            <p class="role">{{ selectedUser.role }}</p>
          </div>
        </div>
        }
      </ng-template>
      <ng-template let-user pTemplate="user">
        <div class="user" style="padding: 12px">
          <img src="{{ user.avatar }}" class="avatar" />
          <div class="content">
            <p class="username">{{ user.username }}</p>
            <p class="role">{{ user.role }}</p>
          </div>
        </div>
      </ng-template>
    </p-dropdown>

    <p-divider align="center" type="solid">
      <b>O</b>
    </p-divider>

    <div class="form-field">
      <label class="label">Correo Electronico</label>
      <input
        pInputText
        class="input"
        [(ngModel)]="loginForm.email"
        name="email"
        placeholder="Correo Electronico"
      />
    </div>
    @if (loginForm.email == '') {
    <p class="error">El Correo Electronico no puede estar vacio</p>
    }

    <div class="form-field">
      <label class="label">Contraseña</label>
      <p-password
        [(ngModel)]="loginForm.password"
        [feedback]="false"
        class="custom-password"
        placeholder="Contraseña"
        name="password"
      ></p-password>
    </div>

    <button pButton label="Ingresar" class="button" type="submit"></button>
  </form>
</main>
